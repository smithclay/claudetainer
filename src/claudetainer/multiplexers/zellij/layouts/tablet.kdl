// Claude Code Development Layout - Enhanced Workflow
// Four-tab layout optimized for Claude Code development with latest Zellij features
layout {
    default_tab_template {
        pane size=1 borderless=true {
            plugin location="zellij:tab-bar"
        }
        children
        pane size=2 borderless=true {
            plugin location="zellij:status-bar"
        }
    }
    
    // Tab 1: Claude Code - Main development workspace
    tab name="ğŸ¤– claude" focus=true {
        pane split_direction="vertical" {
            // Main Claude Code terminal
            pane size="70%" {
                name "claude-main"
                command "bash"
                args "-c" "cd /workspaces && if [ -d * ] 2>/dev/null; then cd */; fi; clear; echo 'ğŸ¤– Claude Code Development Environment'; echo 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”'; echo 'ğŸ’¡ Tips:'; echo '  â€¢ Use claude for interactive coding'; echo '  â€¢ Alt+h/l to switch tabs quickly'; echo '  â€¢ Ctrl+p for pane management'; echo '  â€¢ Ctrl+t for tab management'; echo ''; echo 'ğŸ“ Working in:' $(pwd); echo 'ğŸš€ Ready for development!'; echo ''; exec bash"
            }
            
            // Quick commands and notes
            pane size="30%" {
                name "quick-cmds"
                command "bash" 
                args "-c" "cd /workspaces && if [ -d * ] 2>/dev/null; then cd */; fi; clear; echo 'âš¡ Quick Commands'; echo 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”'; echo 'Development:'; echo '  â€¢ claude          # Start Claude Code'; echo '  â€¢ ~/bin/gitui     # Git interface'; echo '  â€¢ git status      # Check status'; echo '  â€¢ git log --oneline -10  # Recent commits'; echo ''; exec bash"
            }
        }
    }
    
    // Tab 2: Cost Monitoring - Usage and resource tracking
    tab name="ğŸ’° cost" {
        pane split_direction="horizontal" {
            // Claude Code usage monitoring
            pane size="60%" {
                name "claude-usage"
                command "bash"
                args "-c" "cd /workspaces && if [ -d * ] 2>/dev/null; then cd */; fi; clear; echo 'ğŸ’° Claude Code Usage Monitor'; echo 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”'; echo 'Starting ccusage for real-time usage tracking...'; echo ''; echo 'ğŸ’¡ This shows:'; echo '  â€¢ Token usage per request'; echo '  â€¢ Cost estimates'; echo '  â€¢ Request patterns'; echo '  â€¢ Daily/weekly totals'; echo ''; echo 'Loading...'; sleep 2; if command -v npx >/dev/null 2>&1; then npx ccusage; else echo 'âŒ ccusage not available. Install with: npm install -g ccusage'; echo 'ğŸ“Š Alternative: Check Claude usage at https://console.anthropic.com'; exec bash; fi"
            }
            
            // System resources
            pane size="40%" {
                name "system-resources"
                command "bash"
                args "-c" "cd /workspaces && if [ -d * ] 2>/dev/null; then cd */; fi; clear; echo 'ğŸ–¥ï¸  System Resources'; echo 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”'; while true; do clear; echo 'ğŸ–¥ï¸  System Resources - $(date)'; echo 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”'; echo; echo 'ğŸ’¾ Memory:'; if command -v free >/dev/null 2>&1; then free -h | head -2; else echo 'Memory info not available'; fi; echo; echo 'ğŸ’¿ Disk:'; if command -v df >/dev/null 2>&1; then df -h / | tail -1; else echo 'Disk info not available'; fi; echo; echo 'âš¡ CPU:'; if command -v top >/dev/null 2>&1; then top -bn1 | grep 'Cpu(s)' | head -1; else echo 'CPU info not available'; fi; echo; echo 'ğŸ³ Container:'; echo 'Container ID:' $(hostname); echo; echo 'ğŸ”„ Auto-refresh every 5s (Ctrl+C to get shell)'; sleep 5; done"
            }
        }
    }
    
    // Tab 3: Git Status - GitUI interface
    tab name="ğŸŒ² git" {
        pane split_direction="vertical" {
            // GitUI main interface
            pane size="70%" {
                name "gitui-main"
                command "bash"
                args "-c" "cd /workspaces && if [ -d * ] 2>/dev/null; then cd */; fi; clear; echo 'ğŸŒ² GitUI Interface'; echo 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”'; if [ -f ~/bin/gitui ]; then echo 'Starting GitUI...'; echo 'Press q to quit GitUI and return to shell'; sleep 1; ~/bin/gitui; else echo 'âŒ GitUI not found at ~/bin/gitui'; echo 'Falling back to git status monitoring...'; git_loop() { while true; do clear; echo 'ğŸŒ² Git Status & Log - $(date +\"%H:%M:%S\")'; echo 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”'; echo; echo 'ğŸ“Š Current Status:'; git status --short 2>/dev/null || echo 'Not a git repository'; echo; echo 'ğŸ“ Recent Commits (last 8):'; git log --oneline --graph -8 2>/dev/null || echo 'No commits yet'; echo; echo 'ğŸŒ¿ Current Branch:'; git branch --show-current 2>/dev/null || echo 'No branch'; echo; echo 'ğŸ”„ Auto-refresh every 10s | Press Ctrl+C for interactive shell'; echo 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”'; sleep 10; done; }; git_loop; fi; exec bash"
            }
            
            // GitUI help and commands
            pane size="30%" {
                name "gitui-help"
                command "bash"
                args "-c" "cd /workspaces && if [ -d * ] 2>/dev/null; then cd */; fi; clear; echo 'âš¡ GitUI Help & Commands'; echo 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”'; echo ''; echo 'ğŸš€ GitUI Controls:'; echo '  Tab         # Switch views'; echo '  Enter       # Select/Open'; echo '  Space       # Stage/Unstage'; echo '  c           # Commit'; echo '  p           # Push'; echo '  f           # Fetch'; echo '  l           # Pull'; echo '  r           # Refresh'; echo '  q           # Quit to shell'; echo '  ?           # Show help'; echo ''; echo 'ğŸ“ Views Available:'; echo '  Status      # Working tree'; echo '  Log         # Commit history'; echo '  Stashing    # Stash management'; echo '  Files tree  # File browser'; echo ''; echo 'ğŸ“ Alternative Commands:'; echo '  ~/bin/gitui             # Start GitUI'; echo '  git status              # Traditional status'; echo '  git log --oneline -10   # Recent commits'; echo ''; echo 'âš¡ Ready for commands!'; exec bash"
            }
        }
    }
    
    // Tab 4: Shell - General development tasks
    tab name="ğŸš shell" {
        pane split_direction="horizontal" {
            // Main shell for general tasks
            pane size="70%" {
                name "main-shell"
                command "bash"
                args "-c" "cd /workspaces && if [ -d * ] 2>/dev/null; then cd */; fi; clear; echo 'ğŸš Development Shell'; echo 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”'; echo 'General purpose shell for development tasks'; echo ''; echo 'ğŸ“ Current directory:' $(pwd); echo ''; echo 'ğŸ› ï¸  Common Development Commands:'; echo '  â€¢ ls -la              # List files'; echo '  â€¢ find . -name \"*.py\" # Find files'; echo '  â€¢ rg \"pattern\"        # Search in files'; echo '  â€¢ tree                # Show directory tree'; echo '  â€¢ which <command>     # Find command location'; echo ''; echo 'ğŸ“¦ Package Management:'; echo '  â€¢ npm install         # Node.js packages'; echo '  â€¢ pip install         # Python packages'; echo '  â€¢ cargo build         # Rust packages'; echo '  â€¢ go mod tidy         # Go modules'; echo ''; echo 'ğŸ”§ Build & Test:'; echo '  â€¢ make               # Run Makefile'; echo '  â€¢ ./build.sh         # Run build script'; echo '  â€¢ npm test           # Run tests'; echo ''; echo 'Ready for commands!'; exec bash"
            }
            
            // File explorer and monitoring
            pane size="30%" {
                name "file-explorer"
                command "bash"
                args "-c" "cd /workspaces && if [ -d * ] 2>/dev/null; then cd */; fi; clear; echo 'ğŸ“ File Explorer'; echo 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”'; file_watch() { while true; do clear; echo 'ğŸ“ File Explorer - $(date +\"%H:%M:%S\")'; echo 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”'; echo; echo 'ğŸ“‚ Current: $(pwd)'; echo; echo 'ğŸ“‹ Directory Contents:'; ls -la 2>/dev/null | head -20; echo; if [ $(ls -la 2>/dev/null | wc -l) -gt 20 ]; then echo '... (showing first 20 items)'; echo; fi; echo 'ğŸ” Quick Navigation:'; echo '  â€¢ cd <dir>    # Change directory'; echo '  â€¢ ls -la      # List all files'; echo '  â€¢ tree        # Show tree view'; echo '  â€¢ pwd         # Current path'; echo; echo 'ğŸ”„ Auto-refresh every 15s | Ctrl+C to interact'; sleep 15; done; }; file_watch"
            }
        }
    }
}